{"ast":null,"code":"// frontend/src/services/api.js\nclass APIService {\n  constructor() {\n    this.baseURL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n    this.connected = false;\n  }\n  async connect() {\n    try {\n      const response = await fetch(`${this.baseURL}/health`);\n      if (!response.ok) {\n        throw new Error('Connection failed');\n      }\n      this.connected = true;\n      return await response.json();\n    } catch (error) {\n      this.connected = false;\n      throw new Error(`Failed to connect to server: ${error.message}`);\n    }\n  }\n  disconnect() {\n    this.connected = false;\n  }\n  async listFiles(path = '') {\n    try {\n      const response = await fetch(`${this.baseURL}/files/list?path=${encodeURIComponent(path)}`);\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      return await response.json();\n    } catch (error) {\n      throw new Error(`Failed to list files: ${error.message}`);\n    }\n  }\n  async downloadFile(filePath, onProgress) {\n    try {\n      const response = await fetch(`${this.baseURL}/files/download?path=${encodeURIComponent(filePath)}`);\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const contentLength = response.headers.get('content-length');\n      const total = parseInt(contentLength, 10);\n      let loaded = 0;\n      const reader = response.body.getReader();\n      const chunks = [];\n      while (true) {\n        const {\n          done,\n          value\n        } = await reader.read();\n        if (done) break;\n        chunks.push(value);\n        loaded += value.length;\n        if (onProgress && total) {\n          onProgress(loaded / total);\n        }\n      }\n      return new Blob(chunks);\n    } catch (error) {\n      throw new Error(`Failed to download file: ${error.message}`);\n    }\n  }\n  async getClientMetrics() {\n    try {\n      const response = await fetch(`${this.baseURL}/metrics/client`);\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      return await response.json();\n    } catch (error) {\n      throw new Error(`Failed to get client metrics: ${error.message}`);\n    }\n  }\n  async getGlobalMetrics() {\n    try {\n      const response = await fetch(`${this.baseURL}/metrics/global`);\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      return await response.json();\n    } catch (error) {\n      throw new Error(`Failed to get global metrics: ${error.message}`);\n    }\n  }\n}\nexport default new APIService();","map":{"version":3,"names":["APIService","constructor","baseURL","process","env","REACT_APP_API_URL","connected","connect","response","fetch","ok","Error","json","error","message","disconnect","listFiles","path","encodeURIComponent","status","downloadFile","filePath","onProgress","contentLength","headers","get","total","parseInt","loaded","reader","body","getReader","chunks","done","value","read","push","length","Blob","getClientMetrics","getGlobalMetrics"],"sources":["C:/Users/iamov/Desktop/Net/tcp-file-transfer/tcp-file-transfer/frontend/src/services/api.js"],"sourcesContent":["// frontend/src/services/api.js\r\nclass APIService {\r\n    constructor() {\r\n        this.baseURL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\r\n        this.connected = false;\r\n    }\r\n\r\n    async connect() {\r\n        try {\r\n            const response = await fetch(`${this.baseURL}/health`);\r\n            if (!response.ok) {\r\n                throw new Error('Connection failed');\r\n            }\r\n            this.connected = true;\r\n            return await response.json();\r\n        } catch (error) {\r\n            this.connected = false;\r\n            throw new Error(`Failed to connect to server: ${error.message}`);\r\n        }\r\n    }\r\n\r\n    disconnect() {\r\n        this.connected = false;\r\n    }\r\n\r\n    async listFiles(path = '') {\r\n        try {\r\n            const response = await fetch(`${this.baseURL}/files/list?path=${encodeURIComponent(path)}`);\r\n            if (!response.ok) {\r\n                throw new Error(`HTTP error! status: ${response.status}`);\r\n            }\r\n            return await response.json();\r\n        } catch (error) {\r\n            throw new Error(`Failed to list files: ${error.message}`);\r\n        }\r\n    }\r\n\r\n    async downloadFile(filePath, onProgress) {\r\n        try {\r\n            const response = await fetch(`${this.baseURL}/files/download?path=${encodeURIComponent(filePath)}`);\r\n            \r\n            if (!response.ok) {\r\n                throw new Error(`HTTP error! status: ${response.status}`);\r\n            }\r\n\r\n            const contentLength = response.headers.get('content-length');\r\n            const total = parseInt(contentLength, 10);\r\n            let loaded = 0;\r\n\r\n            const reader = response.body.getReader();\r\n            const chunks = [];\r\n\r\n            while (true) {\r\n                const { done, value } = await reader.read();\r\n                \r\n                if (done) break;\r\n                \r\n                chunks.push(value);\r\n                loaded += value.length;\r\n                \r\n                if (onProgress && total) {\r\n                    onProgress(loaded / total);\r\n                }\r\n            }\r\n\r\n            return new Blob(chunks);\r\n        } catch (error) {\r\n            throw new Error(`Failed to download file: ${error.message}`);\r\n        }\r\n    }\r\n\r\n    async getClientMetrics() {\r\n        try {\r\n            const response = await fetch(`${this.baseURL}/metrics/client`);\r\n            if (!response.ok) {\r\n                throw new Error(`HTTP error! status: ${response.status}`);\r\n            }\r\n            return await response.json();\r\n        } catch (error) {\r\n            throw new Error(`Failed to get client metrics: ${error.message}`);\r\n        }\r\n    }\r\n\r\n    async getGlobalMetrics() {\r\n        try {\r\n            const response = await fetch(`${this.baseURL}/metrics/global`);\r\n            if (!response.ok) {\r\n                throw new Error(`HTTP error! status: ${response.status}`);\r\n            }\r\n            return await response.json();\r\n        } catch (error) {\r\n            throw new Error(`Failed to get global metrics: ${error.message}`);\r\n        }\r\n    }\r\n}\r\n\r\nexport default new APIService();"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}